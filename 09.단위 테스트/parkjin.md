# 단위 테스트

## TDD 법칙 세 가지
1. 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
2. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다
3. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다

위 방식대로 일하면 실제 코드를 전부 테스트하는 테스트 케이스가 나옴
그러나 실제 코드와 맞먹을 정도로 방대한 테스트 코드는 심각한 관리 문제를 유발함

## 깨끗한 테스트 코드 유지하기
- 지저분한 테스트 코드를 내놓는 것은 테스트를 안하는 것보다 못함
- 실제 코드가 변화하면 테스트 코드도 변해야 하기 때문에 테스트 코드가 복잡할 수록 실제 코드를 짜는 것보다 오래 걸리기 십상임
- 새버전을 출시할 때마다 유지 보수 비용이 증가하고 결국 테스트 케이스를 폐기하는 상황도 발생함
- 테스트 코드는 실제 코드 못지 않게 중요하며 사고와 설계와 주의를 하여 깨끗하게 작성해야 함

## 테스트는 유연성, 유지보수성, 재사용성을 제공한다
- 코드의 유연성, 유지보수성, 재사용성을 제공하는 버팀목은 단위 테스트임
- 설계를 아무리 잘 나눴더라도 테스트 케이스가 없는 모든 변경은 잠정적인 버그임
- 테스트 케이스가 있다면 코드 변경이 쉽고, 공포가 줄어듬

## 깨끗한 테스트 코드
- 깨끗한 테스트 코드에는 가독성이 필요함
- 정말 필요한 자료 유형과 함수만 사용하여 작성하도록 해야함

## 도메인에 특화된 테스트 언어
- 도메인에 특화된 언어 DSL
- 시스템 조작 API를 사용하는 대신 API 위에다 함수와 유틸리티를 구현한 후 해당 함수와 유틸리티를 사용하면 짜기도 읽기도 쉬워짐
- 이렇게 구현하면, 테스트를 구현하는 당사자와 추후 테스트를 읽어볼 독자를 도와주는 특수 API인 테스트 언어가 됨
- 처음부터 설계된 게 아닌 코드를 계속 리팩토링하며 진화된 API임

## 이중 표현
- 테스트 코드는 실제 환경이 아닌 테스트 환경에서 돌아가는 코드이기에 단순하고, 간결하고, 표현력이 풍부해야 하지만, 실제 코드만큼 효율적일 필요는 없음
- 실제 환경은 컴퓨터 자원과 메모리가 제한적일 가능성이 높으나 테스트 환경은 제한적일 가능성이 낮기에 코드의 깨끗함과는 철저히 무관함

## 테스트 당 assert 하나
